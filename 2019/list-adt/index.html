<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Wanakiki">
  
  
  
  <link rel="prev" href="https://wanakiki.github.io/2019/zuma-list/" />
  <link rel="next" href="https://wanakiki.github.io/2019/train/" />
  <link rel="canonical" href="https://wanakiki.github.io/2019/list-adt/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           æ•°æ®ç»“æ„ä½œä¸šäºŒ List ADT | Wanakiki`s Blog
       
  </title>
  <meta name="title" content="æ•°æ®ç»“æ„ä½œä¸šäºŒ List ADT | Wanakiki`s Blog">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/wanakiki.github.io"
    },
    "articleSection" : "posts",
    "name" : "æ•°æ®ç»“æ„ä½œä¸šäºŒ List ADT",
    "headline" : "æ•°æ®ç»“æ„ä½œä¸šäºŒ List ADT",
    "description" : "é—®é¢˜åˆ†æ é¢˜ç›®è¦æ±‚è‡ªè¡Œå®ç°list ADTï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå®ç°PrintLotså‡½æ•°å¹¶ä¸”å®ç°æ‡’æƒ°åˆ é™¤åŠŸèƒ½ã€‚å¯¹äºPrintLotså‡½æ•°ï¼Œé¢˜ç›®è¦æ±‚åˆ†æ",
    "inLanguage" : "zh-cn",
    "author" : "Wanakiki",
    "creator" : "Wanakiki",
    "publisher": "Wanakiki",
    "accountablePerson" : "Wanakiki",
    "copyrightHolder" : "Wanakiki",
    "copyrightYear" : "2019",
    "datePublished": "2019-04-20 20:22:40 \x2b0800 CST",
    "dateModified" : "2019-04-20 20:22:40 \x2b0800 CST",
    "url" : "https:\/\/wanakiki.github.io\/2019\/list-adt\/",
    "wordCount" : "2676",
    "keywords" : [  "Wanakiki`s Blog"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://wanakiki.github.io">Wanakiki`s Blog</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://wanakiki.github.io">Wanakiki`s Blog</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">æ•°æ®ç»“æ„ä½œä¸šäºŒ List ADT</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://wanakiki.github.io" rel="author">Wanakiki</a> with â™¥ 
                <span class="post-time">
                on <time datetime=2019-04-20 itemprop="datePublished">April 20, 2019</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://wanakiki.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"> æ•°æ®ç»“æ„ </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          

<h2 id="é—®é¢˜åˆ†æ">é—®é¢˜åˆ†æ</h2>

<p>é¢˜ç›®è¦æ±‚è‡ªè¡Œå®ç°list ADTï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå®ç°PrintLotså‡½æ•°å¹¶ä¸”å®ç°æ‡’æƒ°åˆ é™¤åŠŸèƒ½ã€‚å¯¹äºPrintLotså‡½æ•°ï¼Œé¢˜ç›®è¦æ±‚åˆ†æè¿è¡Œæ—¶é—´ï¼›å¯¹äºæ‡’æƒ°åˆ é™¤åŠŸèƒ½ï¼Œé™¤ç¼–å†™å®ç°å¤–ï¼Œé¢˜ç›®è¿˜è¦æ±‚åˆ—å‡ºæ‡’æƒ°åˆ é™¤çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚</p>

<p><strong>PrintLots(L,P)</strong>ï¼šæœ‰ä¸¤ä¸ªé“¾è¡¨Lå’ŒP, ä»–ä»¬åŒ…å«ä»¥å‡åºæ’åˆ—çš„æ•´æ•°ï¼Œæ“ä½œPrintLots(L,P)å°†æ‰“å°Lä¸­é‚£äº›ç”±Pæ‰€æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ ã€‚</p>

<p><strong>æ‡’æƒ°åˆ é™¤ï¼ˆlazy deletionï¼‰</strong>ï¼šä¸ºäº†åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬åªæ ‡è®°ä¸Šè¯¥å…ƒç´ è¢«åˆ é™¤ã€‚è¡¨ä¸­è¢«åˆ é™¤å’Œéè¢«åˆ é™¤å…ƒç´ çš„ä¸ªæ•°ä½œä¸ºæ•°æ®ç»“æ„çš„ä¸€éƒ¨åˆ†è¢«ä¿ç•™ã€‚å¦‚æœè¢«åˆ é™¤å…ƒç´ å’Œéè¢«åˆ é™¤å…ƒç´ ä¸€æ ·å¤šï¼Œæˆ‘ä»¬éå†æ•´ä¸ªè¡¨ï¼Œå¯¹æ‰€æœ‰è¢«æ ‡è®°çš„èŠ‚ç‚¹æ‰§è¡Œæ ‡å‡†çš„åˆ é™¤ç®—æ³•ã€‚</p>

<h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2>

<p>è®¾è®¡list ADTï¼Œå‡†å¤‡å¥½PrintLotså‡½æ•°æ‰€éœ€è¦çš„æ¥å£ã€‚ä¸»æ–‡ä»¶å¼•ç”¨è‡ªå·±ç¼–å†™çš„list ADTï¼Œå¹¶åœ¨ä¸»æ–‡ä»¶ä¸­å®Œæˆå¯¹PrintLotså‡½æ•°çš„å®ç°ï¼Œæ‡’æƒ°åˆ é™¤åˆ™å¯ä»¥ç›´æ¥å°è£…åœ¨ADTä¸­ã€‚ç”±äºæœ¬æ¬¡å®éªŒç¼ºä¹ç¤ºä¾‹è¾“å…¥è¾“å‡ºï¼Œå› æ­¤è¿˜è¦å¯¹è¾“å…¥è¾“å‡ºéƒ¨åˆ†ç¨å¾®åŠ ä»¥è®¾è®¡ï¼Œåœ¨æ­¤ä¸å¤šèµ˜è¿°ã€‚</p>

<h2 id="ç®—æ³•è®¾è®¡">ç®—æ³•è®¾è®¡</h2>

<p>list ADTçš„å®ç°å¤§ä½“å¯ä»¥æŒ‰ç…§è¯¾æœ¬æ‰€ç»™çš„æ¡†æ¶æ¥åˆæ­¥æ„å»ºï¼Œä¹‹åå¯¹å…¶è¿›è¡Œä¸°å¯Œï¼Œé¦–å…ˆå®ç°èŠ‚ç‚¹ç±»ï¼Œå†è¿›ä¸€æ­¥å®ç°Listç±»ã€‚è€ƒè™‘åˆ°æ‡’æƒ°åˆ é™¤çš„éœ€è¦ï¼Œåœ¨å®ç°èŠ‚ç‚¹ç±»çš„æ—¶å€™æˆ‘åœ¨å…¶ä¸­åŠ å…¥äº†æ˜¯å¦åˆ é™¤çš„æ ‡å¿—ï¼Œå®ç°Listç±»æ—¶å¢åŠ äº†ç”¨äºç»Ÿè®¡ä¼ªåˆ é™¤å…ƒç´ ä¸ªæ•°çš„å˜é‡ã€‚ä¸ºäº†æ›´è¿›ä¸€æ­¥è´´åˆæ ‡å‡†æ¨¡æ¿åº“çš„æ“ä½œï¼Œç›¸å¯¹å¤šæ­¤ä¸€ä¸¾åœ°åŠ å…¥äº†è¿­ä»£å™¨å­ç±»ã€‚ï¼ˆå®è·µè¯æ˜ï¼Œæˆ‘å¯¹è¿­ä»£å™¨ç›¸å…³çŸ¥è¯†çš„äº†è§£å¹¶ä¸å……åˆ†&hellip;ğŸ˜•ï¼‰</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://i.loli.net/2019/05/03/5ccbb39389ad9.jpg" alt="ç»“æ„ç¤ºæ„" class="lazyload"><figcaption class="image-caption">ç»“æ„ç¤ºæ„</figcaption></figure></p>

<h3 id="printlotså‡½æ•°">PrintLotså‡½æ•°</h3>

<p>å› ä¸ºä¸¤ä¸ªé“¾è¡¨çš„å…ƒç´ éƒ½æ˜¯å‡åºæ’åˆ—çš„ï¼Œæ‰€ä»¥Lçš„è¿­ä»£å™¨å¯ä»¥ä¸€ç›´å‘ä¸€ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œæ•´ä¸ªå‡½æ•°çš„å®ç°é™ä½äº†ä¸€äº›éš¾åº¦ã€‚å®šä¹‰ä¸€ä¸ªæ•´å½¢å˜é‡ç”¨æ¥è®°å½•å½“å‰Lçš„è¿­ä»£å™¨æŒ‡å‘ä½ç½®çš„ç¼–å·ï¼Œç¼–å·è‹¥ä¸Pçš„è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ ç›¸åŒåˆ™è¿›è¡Œè¾“å‡ºï¼ŒåŒæ—¶ä¸¤ä¸ªè¿­ä»£å™¨å‘åç§»åŠ¨ã€‚è‹¥ç¼–å·ä¸På½“å‰å…ƒç´ ä¸åŒï¼Œåˆ™æŒ‡å‘Lçš„è¿­ä»£å™¨å‘åç§»åŠ¨ã€‚å‡½æ•°çš„ç»ˆæ­¢æ¡ä»¶ä¸ºé“¾è¡¨Péå†ç»“æŸã€‚</p>

<h4 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h4>

<p>ä»æ•´ä½“ä¸Šæ¥çœ‹ï¼ŒPrintLotså‡½æ•°åªæ˜¯ä¸¤ä¸ªé“¾è¡¨çš„å•å‘éå†è¾“å‡ºï¼Œåªæ˜¯ç»†èŠ‚æ–¹é¢ç¨å¾®å¤æ‚ï¼Œä½†å¼•å…¥çš„å‡ä¸ºå¸¸æ•°æ—¶é—´å¯ä»¥å®Œæˆçš„æ“ä½œã€‚å› ä¸ºPçš„å…ƒç´ ä¸ªæ•°ä¸å¯èƒ½è¶…è¿‡Lçš„å…ƒç´ ä¸ªæ•°ï¼Œæ‰€ä»¥æœ€åæƒ…å†µä¾¿æ˜¯è¾“å‡ºäº†Lçš„æ‰€æœ‰å…ƒç´ ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p>

<h3 id="æ‡’æƒ°åˆ é™¤">æ‡’æƒ°åˆ é™¤</h3>

<p>å‡½æ•°å‚æ•°ä¸ºæŒ‡å‘è¦åˆ é™¤å…ƒç´ çš„è¿­ä»£å™¨ï¼Œå‡½æ•°é€šè¿‡è¿­ä»£å™¨è®¿é—®è¯¥å…ƒç´ å†…éƒ¨çš„åˆ é™¤æ ‡å¿—ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚ä¿®æ”¹ä¹‹åæ£€æŸ¥å½“å‰ä¼ªåˆ é™¤å…ƒç´ çš„æ€»æ•°ï¼Œå¤§äºæ€»å…ƒç´ ä¸€èˆ¬å¯¹æ•´ä¸ªé“¾è¡¨è¿›è¡Œéå†åˆ é™¤ã€‚æ€»ä½“å®ç°ç›¸å¯¹ç®€å•ã€‚</p>

<h4 id="æ‡’æƒ°åˆ é™¤ä¼˜ç¼ºç‚¹åˆ†æ">æ‡’æƒ°åˆ é™¤ä¼˜ç¼ºç‚¹åˆ†æ</h4>

<p>ä¼˜ç‚¹ï¼šè¯¯åˆ æ•°æ®æœ‰æ¢å¤çš„ç©ºé—´ï¼Œæœªè¢«é‡Šæ”¾çš„ç©ºé—´å¯ä»¥è¿›è¡ŒäºŒæ¬¡åˆ©ç”¨ï¼Œå‡å°‘äº†èµ„æºæ¶ˆè€—è¾ƒå¤§çš„åˆ é™¤è¿‡ç¨‹çš„éœ€æ±‚æ¬¡æ•°ï¼ˆé“¾è¡¨ä¸­ä½“ç°ä¸æ˜æ˜¾ï¼‰ã€‚
ç¼ºç‚¹ï¼šè®°å½•å…ƒç´ ä¼ªåˆ é™¤éœ€è¦é¢å¤–çš„æ“ä½œå’Œç©ºé—´ï¼Œè¢«åˆ é™¤çš„èŠ‚ç‚¹ä¸åŠæ—¶é‡Šæ”¾å¢åŠ äº†ç©ºé—´çš„å ç”¨ï¼Œä¹Ÿæé«˜äº†éƒ¨åˆ†æ“ä½œæ‰€éœ€çš„æ—¶é—´ã€‚</p>

<h2 id="æµç¨‹å›¾">æµç¨‹å›¾</h2>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://i.loli.net/2019/05/03/5ccbb3959aa95.jpg" alt="lazy deletion" class="lazyload"><figcaption class="image-caption">lazy deletion</figcaption></figure></p>

<h2 id="ç¼–ç¨‹å®ç°">ç¼–ç¨‹å®ç°</h2>

<p>å…±ç¼–å†™äº†ä¸‰ä¸ªæ–‡ä»¶ï¼šlistnode.hã€my_list.hã€main.cpp</p>

<p>1.listnode.h</p>

<pre><code class="language-cpp">    #include&lt;iostream&gt;
    using namespace std;

    //å®šä¹‰åˆ—è¡¨çš„èŠ‚ç‚¹
    template &lt;typename T&gt; struct ListNode
    {
        T data;
        ListNode&lt;T&gt;* pred;
        ListNode&lt;T&gt;* succ;
        bool need_remove;   //need_removeä¸ºäº†æ–¹ä¾¿æ‡’æƒ°æ¶ˆé™¤

        ListNode() : need_remove(false) {}
        ListNode(T e, ListNode&lt;T&gt;* p = NULL, ListNode&lt;T&gt;* s = NULL)
            : data(e), pred(p), succ(s), need_remove(false) {}

        ListNode&lt;T&gt;* insertAsPred(T const&amp; e);
        ListNode&lt;T&gt;* insertAsSucc(T const&amp; e);
    };

    //å‰æ’å…¥
    template &lt;typename T&gt;
    ListNode&lt;T&gt;* ListNode&lt;T&gt;::insertAsPred(T const&amp; e){
        ListNode&lt;T&gt;* x = new ListNode(e, pred, this);
        pred-&gt;succ = x;
        pred = x;
        return x;
    }

    //åæ’å…¥
    template &lt;typename T&gt;
    ListNode&lt;T&gt;* ListNode&lt;T&gt;::insertAsSucc(T const&amp; e){
        ListNode&lt;T&gt;* x = new ListNode(e, this, succ);
        succ-&gt;pred = x;
        succ = x;
        return x;
    }
</code></pre>

<p>2.my_list.h</p>

<pre><code class="language-cpp">#include &quot;listnode.h&quot;

template &lt;typename T&gt;
class List
{
  private:
    int _size;
    int _num;
    ListNode&lt;T&gt; *header;
    ListNode&lt;T&gt; *trailer;

  protected:
    void init();
    void copyNodes(ListNode&lt;T&gt; *, int);
    //åªå†™å‡ºäº†æœ‰å¯èƒ½ç”¨åˆ°çš„å‡½æ•°

  public:
    List() { init(); } //é»˜è®¤æ„é€ 
    List(List&lt;T&gt; const &amp;L);
    List(List&lt;T&gt; const &amp;L, int r, int n);
    List(ListNode&lt;T&gt; *p, int n);
    int clear();

    ~List(); //ææ„

    class Iterator{
      public:
        ListNode&lt;T&gt; *ptr;

        Iterator() : ptr(NULL) {}
        Iterator(ListNode&lt;T&gt; *tmp) : ptr(tmp) {}

        T operator*(){
            return ptr-&gt;data;
            //ä¸ºç©ºæ—¶å¦‚ä½•æŠ›å‡ºé”™è¯¯ï¼Ÿ
        }

        bool operator==(Iterator const &amp;x) { return ptr == x.ptr; }
        bool operator!=(Iterator const &amp;x) { return ptr != x.ptr; }
        Iterator operator++(int){
            //ä¸èƒ½åœ¨è¿™é‡Œè®¿é—®trailerï¼Œé‚£ä¹ˆæ ‡å‡†çš„è¿­ä»£å™¨æ˜¯æ€ä¹ˆæ“ä½œçš„å‘¢
            Iterator tmp(ptr);
            while(1){
                if(ptr-&gt;succ != NULL)
                    ptr = ptr-&gt;succ;
                if(!ptr-&gt;need_remove)   //ä¸éœ€è¦ç»§ç»­è®¿é—®ï¼Œè·³å‡ºå¾ªç¯
                    break;
            }
            return tmp;
        }
        Iterator operator--(int){
            Iterator tmp(ptr);
            while(1){
                if (ptr-&gt;pred != NULL)
                    ptr = ptr-&gt;pred;
                if(!ptr-&gt;need_remove)
                    break;
            }
            return tmp;
        }
        Iterator&amp; operator++(){
            while(1){
                if(ptr-&gt;succ != NULL)
                    ptr = ptr-&gt;succ;
                if(!ptr-&gt;need_remove)   //ä¸éœ€è¦ç»§ç»­è®¿é—®ï¼Œè·³å‡ºå¾ªç¯
                    break;
            }
            return *this;
        }
        Iterator&amp; operator--(){
            while(1){
                if (ptr-&gt;pred != NULL)
                    ptr = ptr-&gt;pred;
                if(!ptr-&gt;need_remove)
                    break;
            }
            return *this;
        }
    };

    bool empty() const { return _size &lt;= 0; }
    int size() const { return _size-_num; }
    ListNode&lt;T&gt; *insertAsFirst(T const &amp;e);
    ListNode&lt;T&gt; *insertAsLast(T const &amp;e);
    Iterator begin() { return ++Iterator(header); }
    Iterator end() { return Iterator(trailer); }
    ListNode&lt;T&gt; *first() const { return header-&gt;succ; } //firstå’Œbeginå®Œå…¨æ²¡å¿…è¦
    ListNode&lt;T&gt; *last() const { return trailer-&gt;pred; }
    T remove(ListNode&lt;T&gt; *p);
    void lazy_deletion(Iterator i);
    void show();
    void Advance(Iterator &amp;i, int n);
};

template &lt;typename T&gt; //åˆ—è¡¨åˆå§‹åŒ–
void List&lt;T&gt;::init()
{
    header = new ListNode&lt;T&gt;;
    trailer = new ListNode&lt;T&gt;;
    header-&gt;succ = trailer;
    header-&gt;pred = NULL;
    trailer-&gt;pred = header;
    trailer-&gt;succ = NULL;
    _size = 0;
    _num = 0;
}

//å¤åˆ¶è‡ªpå¼€å§‹çš„né¡¹
template &lt;typename T&gt;
void List&lt;T&gt;::copyNodes(ListNode&lt;T&gt; *p, int n)
{
    init();
    while (n--)
    {
        insertASLast(p-&gt;data);
        p = p-&gt;succ;
    }
}

//Clear()
template &lt;typename T&gt;
int List&lt;T&gt;::clear()
{
    int num = _size;
    if (_size)
    {
        ListNode&lt;T&gt; *p = header-&gt;succ;
        ListNode&lt;T&gt; *tmp;
        while (p != trailer)
        {
            tmp = p-&gt;succ;
            delete p;
            p = tmp;
        }
    }
    _size = 0;
    _num = 0;
    return num;
}

//æ„é€ å‡½æ•°
template &lt;typename T&gt;
List&lt;T&gt;::List(List&lt;T&gt; const &amp;L) { copyNodes(L.first(), L.size()); }

template &lt;typename T&gt;
List&lt;T&gt;::List(List&lt;T&gt; const &amp;L, int r, int n)
{
    ListNode&lt;T&gt; *tmp = L.first();
    while (--r)
        tmp = tmp-&gt;succ;
    copyNodes(tmp, n);
}

template &lt;typename T&gt;
List&lt;T&gt;::List(ListNode&lt;T&gt; *p, int n) { copyNodes(p, n); }

//ææ„å‡½æ•°
template &lt;typename T&gt;
List&lt;T&gt;::~List()
{
    clear();
    delete trailer;
    delete header;
}

template &lt;typename T&gt;
ListNode&lt;T&gt; *List&lt;T&gt;::insertAsFirst(T const &amp;e)
{
    _size++;
    return header-&gt;insertAsSucc(e);
}

template &lt;typename T&gt;
ListNode&lt;T&gt; *List&lt;T&gt;::insertAsLast(T const &amp;e)
{
    _size++;
    return trailer-&gt;insertAsPred(e);
}

//åˆ é™¤
template &lt;typename T&gt;
T List&lt;T&gt;::remove(ListNode&lt;T&gt; *p)
{
    T tmp= p-&gt;data;
    _size--;
    p-&gt;pred-&gt;succ = p-&gt;succ;
    p-&gt;succ-&gt;pred = p-&gt;pred;
    delete p;
    return tmp;
}

template &lt;typename T&gt;
void List&lt;T&gt;::lazy_deletion(Iterator i){
    _num++;
    ListNode&lt;T&gt;* tmp = i.ptr;
    tmp-&gt;need_remove = true;

    //æ•°é‡å¤§äºä¸€åŠå¼€å§‹å…¨éƒ¨åˆ é™¤
    if(_num &gt;= _size/2){
        _num = 0;
        ListNode&lt;T&gt; *p = header-&gt;succ;
        while(trailer != p){
            if(!p-&gt;need_remove){
                p = p-&gt;succ;
                continue;
            }
                
            tmp = p-&gt;succ;
            remove(p);
            p = tmp;       
        }
    }
    return ;
}

//è¾“å‡ºæ ¼å¼åŒ–
template &lt;typename T&gt;
void List&lt;T&gt;::show(){
    if(_size == 0){
        cout &lt;&lt; &quot;None&quot; &lt;&lt; endl;
        return ;
    }
    ListNode&lt;T&gt;* p = header;
    while(trailer != (p = p-&gt;succ)){
        if(p == header-&gt;succ){
            cout &lt;&lt; p-&gt;data;
            continue;
        }
        if(p-&gt;pred-&gt;need_remove &amp;&amp; p-&gt;need_remove)    cout &lt;&lt; &quot;____&quot;;
        else if(p-&gt;need_remove)     cout &lt;&lt; &quot;--__&quot;;
        else if(p-&gt;pred-&gt;need_remove)   cout &lt;&lt; &quot;__-&gt;&quot;;
        else    cout &lt;&lt; &quot;---&gt;&quot;;
        cout &lt;&lt; p-&gt;data;
    }
    return ;
}

//ç”¨äºè¿­ä»£å™¨çš„ç§»åŠ¨
template &lt;typename T&gt;
void List&lt;T&gt;::Advance(Iterator &amp; i, int n){
    if(n &gt;= 0){
        while(n--)
            i.ptr = i.ptr-&gt;succ;
    }
    else{
        while(n++)
            i.ptr = i.ptr-&gt;pred;
    }
}
//å¦‚æœå‘å®¹å™¨é‡Œé¢æ”¾ä¸ªpairï¼Ÿ
</code></pre>

<p>3.main.cpp</p>

<pre><code class="language-cpp">#include &quot;my_list.h&quot;


void PrintLots(List&lt;int&gt;&amp; L, List&lt;int&gt;&amp; P){
    int current = 1;

    //æ˜¯å¦å­˜åœ¨ç©ºåºåˆ—
    if(L.empty() || P.empty())  {   cout&lt;&lt;&quot;Error, input is empty&quot;&lt;&lt;endl; return ;}

    List&lt;int&gt;::Iterator l = L.begin();
    List&lt;int&gt;::Iterator p = P.begin();
    while(1){
        if(L.size() &lt; *p){  
            cout &lt;&lt; endl &lt;&lt; &quot;Error, the number of P is bigger than the size of L&quot; &lt;&lt; endl;  
            break;
        }

        if(current++ == *p){
            cout &lt;&lt; *l &lt;&lt; &quot; &quot;;
            p++;
        }

        //è¾“å‡ºç»“æŸ
        if(p == P.end()){  
                cout &lt;&lt; endl &lt;&lt; &quot;Finished!&quot; &lt;&lt; endl;
                break;
        }
        l++;
    }
    return ;
}

int main(){
    int m, n, tmp, last;
    int select = 0;
    while(1){
        cout &lt;&lt; &quot;Choose function(0 means lazy_deletion, 1 means PrintLots):&quot;;
        cin &gt;&gt; select;
        if(select){
            List&lt;int&gt; L, P;
            cout &lt;&lt; &quot;Input the size of L and P: &quot;;
            cin &gt;&gt; m &gt;&gt; n;
            cout &lt;&lt; &quot;Input the elements of L: &quot; &lt;&lt; endl;
            while (m--){
                cin &gt;&gt; tmp;
                L.insertAsLast(tmp);
            }
            cout &lt;&lt; &quot;Input the elements of P: &quot; &lt;&lt; endl;
            while (n--){
                cin &gt;&gt; tmp;
                P.insertAsLast(tmp);
            }
            PrintLots(L, P);
        }
        else{
            List&lt;int&gt; L;
            cout &lt;&lt; &quot;Input the size of L: &quot;;
            cin &gt;&gt; m;
            cout &lt;&lt; &quot;Input the elements of L:&quot; &lt;&lt; endl;
            for(int j = 0; j &lt; m; j++){
                cin &gt;&gt; tmp;
                L.insertAsLast(tmp);
            }
            cout &lt;&lt; &quot;L is: &quot;;
            L.show();
            cout&lt;&lt;endl;


            List&lt;int&gt;::Iterator i = L.begin();
            last = 1;
            cout &lt;&lt; &quot;How many elements do you want to delete? &quot;;
            cin &gt;&gt; n;
            cout &lt;&lt; &quot;Input them(from 1 to &quot; &lt;&lt; m &lt;&lt; &quot;)&quot; &lt;&lt; endl;
            while(n--){
                cin &gt;&gt; tmp;
                L.Advance(i, tmp-last);
                last = tmp;
                L.lazy_deletion(i);
            }
            cout &lt;&lt; &quot;Now L is: &quot;;
            L.show();
            cout &lt;&lt; endl;
        } 
    }
}
</code></pre>

<h2 id="ç»“æœåˆ†æ">ç»“æœåˆ†æ</h2>

<p>PrintLotsè¿›è¡Œäº†å››ç»„æµ‹è¯•ï¼Œä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹å‡ºå¯¹é”™è¯¯æƒ…å†µè¿›è¡Œäº†æœ‰æ•ˆçš„åˆ¤æ–­ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¤„ç†ä¸€èˆ¬æƒ…å†µã€‚</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://i.loli.net/2019/05/03/5ccbb396983b0.jpg" alt="PrintLotsæµ‹è¯•" class="lazyload"><figcaption class="image-caption">PrintLotsæµ‹è¯•</figcaption></figure></p>

<p>ä¸ºäº†æ–¹ä¾¿æ‡’æƒ°åˆ é™¤çš„æŸ¥çœ‹ï¼Œè®¾ç½®äº†ä¸€ä¸ªå‡½æ•°ç”¨æ¥è¡¨ç°é“¾è¡¨å½“å‰çš„æƒ…å†µï¼ŒåŒæ—¶è¿›è¡Œäº†ä¸‰ç§æ ·ä¾‹çš„æµ‹è¯•ï¼Œèƒ½å¤Ÿä»£è¡¨æ‰€æœ‰ç±»å‹çš„æ»¡è¶³è¦æ±‚çš„è¾“å…¥æƒ…å†µã€‚å¯ä»¥å¾ˆå®¹æ˜“çš„çœ‹å‡ºå½“åˆ é™¤å…ƒç´ è¿‡åŠæ—¶æŒ‰è¦æ±‚å®Œæˆäº†æ“ä½œã€‚</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://i.loli.net/2019/05/03/5ccbb3979a5b2.jpg" alt="æ‡’æƒ°åˆ é™¤æµ‹è¯•" class="lazyload"><figcaption class="image-caption">æ‡’æƒ°åˆ é™¤æµ‹è¯•</figcaption></figure></p>

<h2 id="æ€»ç»“ä½“ä¼š">æ€»ç»“ä½“ä¼š</h2>

<ol>
<li>æ·±åˆ»æ„Ÿè§‰åˆ°è‡ªå·±çš„å®è§‚æ€ç»´æœ‰æå¤§çš„æ¬ ç¼ºï¼Œè‡ªå·±è®¾è®¡å‡ºçš„ç±»ä¸­çš„å‡½æ•°ä¸èƒ½å¾ˆå¥½åœ°è¡”æ¥ï¼Œç¼–ç¨‹æ€ç»´æœ‰é—®é¢˜ã€‚</li>
<li>è‡ªå·±å†™çš„è¿­ä»£å™¨å¯èƒ½ç§°ä¸ä¸Šæ˜¯è¿­ä»£å™¨ï¼Œåªæ˜¯ç¨å¾®åŒ…è£…äº†ä¸€ä¸‹æŒ‡é’ˆã€‚è‡ªå·±æµ‹è¯•çš„æ—¶å€™å‘ç°åœ¨iteratorå·²ç»è¢«å®šä¹‰ï¼Œæ„è¯†åˆ°å¹³æ—¶æ‰€ç”¨çš„è¿­ä»£å™¨å¹¶ä¸æ˜¯å®šä¹‰åœ¨å®¹å™¨çš„å¤´æ–‡ä»¶ä¸­ã€‚</li>
<li>è¾¹ç•Œç­‰ç‰¹æ®Šæƒ…å†µæ²¡æœ‰å¾—åˆ°å¾ˆå¥½çš„å¤„ç†ï¼Œä¸è¿‡èƒ½å¤Ÿä¿è¯åœ¨è¾“å…¥è§„èŒƒçš„æƒ…å†µä¸‹å¾—åˆ°è‰¯å¥½çš„ç»“æœï¼Œä»£ç æ€»ä½“æœ‰å¾…å®Œå–„ã€‚ï¼ˆæ€»ä¹‹è¿˜æ˜¯å¯¹æ ‡å‡†æ¨¡æ¿åº“ç‰¹æ®Šæƒ…å†µå¤„ç†æ–¹å¼ä¸å¤Ÿäº†è§£ğŸ“Œ</li>
<li>å¾ˆå¤šç”¨ä¸åˆ°çš„ä¸œè¥¿ä¹Ÿè¿›è¡Œäº†å®ç°ï¼Œå¯¼è‡´ä»£ç é‡ç›¸å¯¹è¾ƒå¤§ğŸ˜“</li>
</ol>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Wanakiki </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://wanakiki.github.io/2019/list-adt/>https://wanakiki.github.io/2019/list-adt/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                æœ¬æ–‡é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯
            </p>
            
    </div>

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â· 
                <span><a href="https://wanakiki.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://wanakiki.github.io/2019/zuma-list/" class="prev" rel="prev" title="æ•°æ®ç»“æ„ä½œä¸šä¸€ Zuma List"><i class="iconfont icon-left"></i>&nbsp;æ•°æ®ç»“æ„ä½œä¸šä¸€ Zuma List</a>
         
        
        <a href="https://wanakiki.github.io/2019/train/" class="next" rel="next" title="æ•°æ®ç»“æ„ä½œä¸šä¸‰ åˆ—è½¦è°ƒåº¦">æ•°æ®ç»“æ„ä½œä¸šä¸‰ åˆ—è½¦è°ƒåº¦&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://wanakiki.github.io">Wanakiki</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
