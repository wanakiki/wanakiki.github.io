<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>PY4E 题目整理（上） - Wanakiki`s Blog</title><meta name="Description" content=""><meta property="og:title" content="PY4E 题目整理（上）" />
<meta property="og:description" content="Coursera中python教程同步题目整理，因为旁听课程不能直接对每章的编程作业进行提交，学到中期之后才发现py4e上有几乎所有题目的在线测试环境，在看完所有的教学视频之后重新刷题，回顾知识点，在" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wanakiki.github.io/posts/python-assignment/" />
<meta property="article:published_time" content="2019-08-04T17:39:49+08:00" />
<meta property="article:modified_time" content="2019-08-04T17:39:49+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="PY4E 题目整理（上）"/>
<meta name="twitter:description" content="Coursera中python教程同步题目整理，因为旁听课程不能直接对每章的编程作业进行提交，学到中期之后才发现py4e上有几乎所有题目的在线测试环境，在看完所有的教学视频之后重新刷题，回顾知识点，在"/>
<meta name="application-name" content="Wanakiki`s Blog">
<meta name="apple-mobile-web-app-title" content="Wanakiki`s Blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://wanakiki.github.io/posts/python-assignment/" /><link rel="prev" href="https://wanakiki.github.io/posts/latex-img/" /><link rel="next" href="https://wanakiki.github.io/posts/python-assignments/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "PY4E 题目整理（上）",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/wanakiki.github.io\/posts\/python-assignment\/"
        },"genre": "posts","keywords": "python, Coursera","wordcount":  2822 ,
        "url": "https:\/\/wanakiki.github.io\/posts\/python-assignment\/","datePublished": "2019-08-04T17:39:49+08:00","dateModified": "2019-08-04T17:39:49+08:00","publisher": {
            "@type": "Organization",
            "name": "wanakiki"},"author": {
                "@type": "Person",
                "name": "wanakiki"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Wanakiki`s Blog">Wanakiki`s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Blog </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Wanakiki`s Blog">Wanakiki`s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Blog</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">PY4E 题目整理（上）</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>wanakiki</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2019-08-04">2019-08-04</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2822 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 6 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#hello-world">Hello world</a>
      <ul>
        <li><a href="#problem">Problem</a></li>
        <li><a href="#code">Code</a></li>
        <li><a href="#回顾">回顾</a></li>
      </ul>
    </li>
    <li><a href="#2-3">2-3</a>
      <ul>
        <li><a href="#problem-1">Problem</a></li>
        <li><a href="#desired-output">Desired Output</a></li>
        <li><a href="#code-1">Code</a></li>
      </ul>
    </li>
    <li><a href="#3-1">3-1</a>
      <ul>
        <li><a href="#problem-2">Problem</a></li>
        <li><a href="#code-2">Code</a></li>
      </ul>
    </li>
    <li><a href="#3-3">3-3</a>
      <ul>
        <li><a href="#program">Program</a></li>
        <li><a href="#code-3">Code</a></li>
      </ul>
    </li>
    <li><a href="#4-6">4-6</a>
      <ul>
        <li><a href="#problem-3">Problem</a></li>
        <li><a href="#code-4">Code</a></li>
      </ul>
    </li>
    <li><a href="#5-2">5-2</a>
      <ul>
        <li><a href="#problem-4">Problem</a></li>
        <li><a href="#code-5">Code</a></li>
      </ul>
    </li>
    <li><a href="#6-5">6-5</a></li>
    <li><a href="#7-2">7-2</a></li>
    <li><a href="#8-4">8-4</a></li>
    <li><a href="#8-5">8-5</a></li>
    <li><a href="#9-4">9-4</a></li>
    <li><a href="#10-2">10-2</a></li>
    <li><a href="#regular-expressions">Regular Expressions</a>
      <ul>
        <li><a href="#finding-numbers-in-a-haystack">Finding Numbers in a Haystack</a></li>
        <li><a href="#data-files">Data Files</a></li>
        <li><a href="#data-format">Data Format</a></li>
        <li><a href="#handling-the-data">Handling The Data</a></li>
        <li><a href="#my-code">My Code</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Coursera中python教程同步题目整理，因为旁听课程不能直接对每章的编程作业进行提交，学到中期之后才发现<a href="https://www.py4e.com/" target="_blank" rel="noopener noreffer">py4e</a>上有几乎所有题目的在线测试环境，在看完所有的教学视频之后重新刷题，回顾知识点，在此进行整理。分为基础部分和网络及数据库编程部分。</p>
<!-- raw HTML omitted -->
<h2 id="hello-world">Hello world</h2>
<h3 id="problem">Problem</h3>
<p>Write a program that uses a print statement to say &lsquo;hello world&rsquo; as shown in &lsquo;Desired Output&rsquo;.</p>
<h3 id="code">Code</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>
</code></pre></div><h3 id="回顾">回顾</h3>
<p>Python中字符串可以用四种引号组合进行标注：<code>' &quot; ''' &quot;&quot;&quot;</code>，其中单独的单引或者双引可以使引号内部不同的引号不需要进行转义，如<code>&quot;this is 'a' test&quot;</code>中的单引号就不需要进行转义。三个单引号和双引号具有相同的作用，可以保证被定义的字符串原封不动地输出（一般定义多行），在后面执行SQL语句时有用到。同时其中的单引号或者双引号不需要转义。</p>
<h2 id="2-3">2-3</h2>
<h3 id="problem-1">Problem</h3>
<p>Write a program to prompt the user for hours and rate per hour using input to compute gross pay. Use 35 hours and a rate of 2.75 per hour to test the program (the pay should be 96.25). You should use input to read a string and float() to convert the string to a number. Do not worry about error checking or bad user data.</p>
<p>根据输入的时间和工资标准计算总工资，并输出。假定时间为35小时，工资标准为2.75每小时，标准结果应为96.25。</p>
<h3 id="desired-output">Desired Output</h3>
<pre><code class="language-no" data-lang="no">Pay: 96.25
</code></pre><h3 id="code-1">Code</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># This first line is provided for you</span>

<span class="n">hrs</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter Hours:&#34;</span><span class="p">)</span>
<span class="n">hrs</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">hrs</span><span class="p">)</span>

<span class="n">rate</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter Rate:&#34;</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Pay:&#39;</span><span class="p">,</span> <span class="n">hrs</span> <span class="o">*</span> <span class="n">rate</span><span class="p">)</span>
</code></pre></div><h2 id="3-1">3-1</h2>
<h3 id="problem-2">Problem</h3>
<p>Write a program to prompt the user for hours and rate per hour using input to compute gross pay. Pay the hourly rate for the hours up to 40 and 1.5 times the hourly rate for all hours worked above 40 hours. Use 45 hours and a rate of 10.50 per hour to test the program (the pay should be 498.75). You should use input to read a string and float() to convert the string to a number. Do not worry about error checking the user input - assume the user types numbers properly.</p>
<p>根据时长和工资标准计算工资，工作时间大于40小时的部分需要付1.5倍工资，标准输入为45，10.5，标准输出为498.75。</p>
<h3 id="code-2">Code</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">hrs</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter Hours:&#34;</span><span class="p">)</span>
<span class="n">h</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">hrs</span><span class="p">)</span>

<span class="n">rate</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter Rates:&#34;</span><span class="p">))</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="n">rate</span> <span class="o">+</span> <span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="mi">40</span><span class="p">)</span> <span class="o">*</span> <span class="n">rate</span> <span class="o">*</span> <span class="mf">1.5</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">rate</span> <span class="o">*</span> <span class="mi">40</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><h2 id="3-3">3-3</h2>
<h3 id="program">Program</h3>
<p>Write a program to prompt for a score between 0.0 and 1.0. If the score is out of range, print an error. If the score is between 0.0 and 1.0, print a grade using the following table:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Score</th>
<th style="text-align:center">Grade</th>
</tr>
</thead>
</table>
<blockquote>
<p>= 0.9 | A
= 0.8 | B
= 0.7 | C
= 0.6 | D
&lt; 0.6 | F</p>
</blockquote>
<p>If the user enters a value out of range, print a suitable error message and exit. For the test, enter a score of 0.85.</p>
<p>按照表格输出对应的级别，要求输入在0到1，越界输出错误信息，假定输入为0.85。</p>
<h3 id="code-3">Code</h3>
<div class="highlight"><pre class="chroma"><code class="language-py" data-lang="py"><span class="n">score</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter Score: &#34;</span><span class="p">)</span>
<span class="n">grade</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;D&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">]</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">score</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;输入不是浮点数&#39;</span><span class="p">)</span>
    <span class="n">quit</span><span class="p">()</span>

<span class="k">if</span> <span class="n">score</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;输入不在指定范围&#39;</span><span class="p">)</span>
    <span class="n">quit</span><span class="p">()</span>

<span class="n">score</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">score</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>

<span class="k">if</span> <span class="n">score</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">grade</span><span class="p">[</span><span class="n">score</span><span class="o">-</span><span class="mi">6</span><span class="p">])</span>
</code></pre></div><p>没有用那么多的判断，使用了一个list。</p>
<h2 id="4-6">4-6</h2>
<h3 id="problem-3">Problem</h3>
<p>Write a program to prompt the user for hours and rate per hour using input to compute gross pay. Pay should be the normal rate for hours up to 40 and time-and-a-half for the hourly rate for all hours worked above 40 hours. Put the logic to do the computation of pay in a function called computepay() and use the function to do the computation. The function should return a value. Use 45 hours and a rate of 10.50 per hour to test the program (the pay should be 498.75). You should use input to read a string and float() to convert the string to a number. Do not worry about error checking the user input unless you want to - you can assume the user types numbers properly. Do not name your variable sum or use the sum() function.</p>
<p>使用函数计算<a href="#3-1" rel="">3-1问题</a>，假定输入规范，测试输入为45h，10.5，标准结果为498.75。</p>
<h3 id="code-4">Code</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">computepay</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">h</span> <span class="o">&lt;=</span> <span class="mi">40</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">h</span> <span class="o">*</span> <span class="n">r</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">40</span> <span class="o">*</span> <span class="n">r</span> <span class="o">+</span> <span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="mi">40</span><span class="p">)</span> <span class="o">*</span> <span class="n">r</span> <span class="o">*</span> <span class="mf">1.5</span>


<span class="n">hrs</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter Hours:&#34;</span><span class="p">)</span>
<span class="n">hrs</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">hrs</span><span class="p">)</span>
<span class="n">rat</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter Rates:&#34;</span><span class="p">))</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">computepay</span><span class="p">(</span><span class="n">hrs</span><span class="p">,</span> <span class="n">rat</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</code></pre></div><h2 id="5-2">5-2</h2>
<h3 id="problem-4">Problem</h3>
<p>Write a program that repeatedly prompts a user for integer numbers until the user enters &lsquo;done&rsquo;. Once &lsquo;done&rsquo; is entered, print out the largest and smallest of the numbers. If the user enters anything other than a valid number catch it with a try/except and put out an appropriate message and ignore the number. Enter 7, 2, bob, 10, and 4 and match the output below.</p>
<p>写一个程序监测用户输入的整数，直到用户输入“done”程序停止，之后程序输出这批数字的最大值和最小值。需要对输入进行检测，对于不合法的输入需要输出<code>Invalid input</code>。</p>
<h3 id="code-5">Code</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">largest</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">smallest</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter a number: &#34;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="s2">&#34;done&#34;</span><span class="p">:</span>
        <span class="k">break</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Invalid input&#39;</span><span class="p">)</span>
        <span class="k">continue</span>

    <span class="k">if</span> <span class="n">largest</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">largest</span> <span class="o">=</span> <span class="n">num</span>
        <span class="n">smallest</span> <span class="o">=</span> <span class="n">num</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">largest</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">:</span>
            <span class="n">largest</span> <span class="o">=</span> <span class="n">num</span>
        <span class="k">if</span> <span class="n">smallest</span> <span class="o">&gt;</span> <span class="n">num</span><span class="p">:</span>
            <span class="n">smallest</span> <span class="o">=</span> <span class="n">num</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Maximum is&#34;</span><span class="p">,</span> <span class="n">largest</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Minimum is&#34;</span><span class="p">,</span> <span class="n">smallest</span><span class="p">)</span>
</code></pre></div><h2 id="6-5">6-5</h2>
<p>Write code using find() and string slicing (see section 6.10) to extract the number at the end of the line below. Convert the extracted value to a floating point number and print it out.</p>
<p>通过find和切片截取字符串中的浮点数。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">text</span> <span class="o">=</span> <span class="s2">&#34;X-DSPAM-Confidence:    0.8475&#34;</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="n">index</span><span class="p">:])</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><h2 id="7-2">7-2</h2>
<p>Write a program that prompts for a file name, then opens that file and reads through the file, looking for lines of the form:</p>
<pre><code class="language-no" data-lang="no">X-DSPAM-Confidence:    0.8475
</code></pre><p>Count these lines and extract the floating point values from each of the lines and compute the average of those values and produce an output as shown below. Do not use the sum() function or a variable named sum in your solution.</p>
<p>You can download the sample data at <a href="http://www.py4e.com/code3/mbox-short.txt">http://www.py4e.com/code3/mbox-short.txt</a> when you are testing below enter mbox-short.txt as the file name.</p>
<p>文件操作，提取指定格式行的数据，并计算平均值。标准输出为<code>Average spam confidence: 0.750718518519</code></p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getNumber</span><span class="p">(</span><span class="n">line</span> <span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1">#查找冒号更加合适</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">:])</span>

<span class="c1"># Use the file name mbox-short.txt as the file name</span>
<span class="n">fname</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter file name: &#34;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;mbox-short.txt&#39;</span>
<span class="n">fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>

<span class="n">Sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fh</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&#34;X-DSPAM-Confidence:&#34;</span><span class="p">):</span>
        <span class="k">continue</span>
    <span class="n">Sum</span> <span class="o">=</span> <span class="n">Sum</span> <span class="o">+</span> <span class="n">getNumber</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Average spam confidence:&#39;</span><span class="p">,</span> <span class="n">Sum</span> <span class="o">/</span> <span class="n">num</span><span class="p">)</span>
</code></pre></div><h2 id="8-4">8-4</h2>
<p>Open the file romeo.txt and read it line by line. For each line, split the line into a list of words using the split() method. The program should build a list of words. For each word on each line check to see if the word is already in the list and if not append it to the list. When the program completes, sort and print the resulting words in alphabetical order.</p>
<p>You can download the sample data at <a href="http://www.py4e.com/code3/romeo.txt">http://www.py4e.com/code3/romeo.txt</a></p>
<p>读取文件，统计其中出现过的单词，按字典序输出。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">fname</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter file name: &#34;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;romeo.txt&#39;</span>
<span class="n">fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fh</span><span class="p">:</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
            <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

<span class="n">lst</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
</code></pre></div><h2 id="8-5">8-5</h2>
<p>Open the file mbox-short.txt and read it line by line. When you find a line that starts with &lsquo;From ' like the following line:</p>
<pre><code class="language-no" data-lang="no">From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
</code></pre><p>You will parse the From line using split() and print out the second word in the line (i.e. the entire address of the person who sent the message). Then print out a count at the end.</p>
<p>Hint: make sure not to include the lines that start with &lsquo;From:&rsquo;.</p>
<p>You can download the sample data at <a href="http://www.py4e.com/code3/mbox-short.txt">http://www.py4e.com/code3/mbox-short.txt</a></p>
<p>读文件，对其中<code>From </code>开始的行，输出邮件来源并统计个数，在最后输出统计结果。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">fname</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter file name: &#34;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="s2">&#34;mbox-short.txt&#34;</span>

<span class="n">fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fh</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;From &#39;</span><span class="p">):</span>
        <span class="k">continue</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;There were&#34;</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="s2">&#34;lines in the file with From as the first word&#34;</span><span class="p">)</span>
</code></pre></div><h2 id="9-4">9-4</h2>
<p>Write a program to read through the mbox-short.txt and figure out who has sent the greatest number of mail messages. The program looks for &lsquo;From ' lines and takes the second word of those lines as the person who sent the mail. The program creates a Python dictionary that maps the sender&rsquo;s mail address to a count of the number of times they appear in the file. After the dictionary is produced, the program reads through the dictionary using a maximum loop to find the most prolific committer.</p>
<p>统计文件中的发信人行，使用字典存储每个人发送邮件的数目。最后使用一个最大for循环，查找到发送最多邮件的人。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter file:&#34;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;mbox-short.txt&#34;</span>
<span class="n">handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">handle</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;From &#39;</span><span class="p">):</span>
        <span class="k">continue</span>

    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">res</span><span class="p">[</span><span class="n">author</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">author</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">count</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">count</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="n">count</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">v</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">k</span>

<span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</code></pre></div><h2 id="10-2">10-2</h2>
<p>Write a program to read through the mbox-short.txt and figure out the distribution by hour of the day for each of the messages. You can pull the hour out from the &lsquo;From ' line by finding the time and then splitting the string a second time using a colon.</p>
<pre><code class="language-no" data-lang="no">From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
</code></pre><p>Once you have accumulated the counts for each hour, print out the counts, sorted by hour as shown below.</p>
<p>统计各个时段中邮件的数目，存储到字典之中，最后按照时间顺序输出各个时间段对应的邮件数。（需要对dict进行排序）</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;Enter file:&#34;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;mbox-short.txt&#34;</span>
<span class="n">handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="n">status</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">handle</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;From &#39;</span><span class="p">):</span>
        <span class="k">continue</span>

    <span class="c1"># 抓取时间</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>

    <span class="c1"># 截取时间</span>
    <span class="n">tim</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">tim</span> <span class="ow">in</span> <span class="n">status</span><span class="p">:</span>
        <span class="n">status</span><span class="p">[</span><span class="n">tim</span><span class="p">]</span> <span class="o">=</span> <span class="n">status</span><span class="p">[</span><span class="n">tim</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">status</span><span class="p">[</span><span class="n">tim</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">res</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">status</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</code></pre></div><p>上面将dict转化为list的步骤利用了python的特性。</p>
<h2 id="regular-expressions">Regular Expressions</h2>
<h3 id="finding-numbers-in-a-haystack">Finding Numbers in a Haystack</h3>
<p>In this assignment you will read through and parse a file with text and numbers. You will extract all the numbers in the file and compute the sum of the numbers.</p>
<h3 id="data-files">Data Files</h3>
<p>We provide two files for this assignment. One is a sample file where we give you the sum for your testing and the other is the actual data you need to process for the assignment.</p>
<ul>
<li>Sample data: <a href="http://py4e-data.dr-chuck.net/regex_sum_42.txt">http://py4e-data.dr-chuck.net/regex_sum_42.txt</a> (There are 90 values with a sum=445833)</li>
<li>Actual data: <a href="http://py4e-data.dr-chuck.net/regex_sum_275911.txt">http://py4e-data.dr-chuck.net/regex_sum_275911.txt</a> (There are 92 values and the sum ends with 76)</li>
</ul>
<p>These links open in a new window. Make sure to save the file into the same folder as you will be writing your Python program. Note: Each student will have a distinct data file for the assignment - so only use your own data file for analysis.</p>
<h3 id="data-format">Data Format</h3>
<p>The file contains much of the text from the introduction of the textbook except that random numbers are inserted throughout the text. Here is a sample of the output you might see:</p>
<pre><code class="language-no" data-lang="no">Why should you learn to write programs? 7746
12 1929 8827
Writing programs (or programming) is a very creative
7 and rewarding activity.  You can write programs for
many reasons, ranging from making your living to solving
8837 a difficult data analysis problem to having fun to helping 128
someone else solve a problem.  This book assumes that
everyone needs to know how to program ...
</code></pre><p>The sum for the sample text above is 27486. The numbers can appear anywhere in the line. There can be any number of numbers in each line (including none).</p>
<h3 id="handling-the-data">Handling The Data</h3>
<p>The basic outline of this problem is to read the file, look for integers using the re.findall(), looking for a regular expression of &lsquo;[0-9]+&rsquo; and then converting the extracted strings to integers and summing up the integers.</p>
<h3 id="my-code">My Code</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 统计文件中数字的总和</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="n">filename</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Input filename:&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;regex_sum_275911.txt&#39;</span>

<span class="n">res</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fh</span><span class="p">:</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;[0-9]+&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>

    <span class="c1"># 计算一行中数字的和</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><p><strong>两行代码解决问题</strong>（好熟悉&hellip;</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">Python</span> <span class="mi">2</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="k">print</span> <span class="nb">sum</span><span class="p">(</span> <span class="p">[</span> <span class="o">******</span> <span class="o">***</span> <span class="o">*</span> <span class="ow">in</span> <span class="o">**********</span><span class="p">(</span><span class="s1">&#39;[0-9]+&#39;</span><span class="p">,</span><span class="o">**************************.</span><span class="n">read</span><span class="p">())</span> <span class="p">]</span> <span class="p">)</span>

<span class="n">Python</span> <span class="mi">3</span><span class="p">:</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="k">print</span><span class="p">(</span> <span class="nb">sum</span><span class="p">(</span> <span class="p">[</span> <span class="o">******</span> <span class="o">***</span> <span class="o">*</span> <span class="ow">in</span> <span class="o">**********</span><span class="p">(</span><span class="s1">&#39;[0-9]+&#39;</span><span class="p">,</span><span class="o">**************************.</span><span class="n">read</span><span class="p">())</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span>
</code></pre></div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2019-08-04</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/python/">python</a>,&nbsp;<a href="/tags/coursera/">Coursera</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/latex-img/" class="prev" rel="prev" title="Latex 插入图片方式整理"><i class="fas fa-angle-left fa-fw"></i>Latex 插入图片方式整理</a>
            <a href="/posts/python-assignments/" class="next" rel="next" title="PY4E 题目整理（下）">PY4E 题目整理（下）<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.75.1">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">wanakiki</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
